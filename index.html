<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö–æ–º–∏–∫—Å –ê–Ω—Ä–∏ (Mobile)</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Cinzel+Decorative:wght@900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --scarlet-dark: #3a0000;
            --scarlet-main: #7c0a02;
            --gold-main: #d4af37;
            --paper-color: #f0e2c5;
        }

        body {
            background-color: #0a0505;
            /* –¢–µ–º–Ω—ã–π —Ñ–æ–Ω –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ */
            background-image: url('https://www.transparenttextures.com/patterns/black-felt.png');
            margin: 0;
            font-family: 'Cinzel', serif;
            color: var(--gold-main);
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        /* –ö–û–ù–¢–ï–ô–ù–ï–† (–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É, —á—Ç–æ–±—ã –Ω–∞ –∫–æ–º–ø–µ —Ç–æ–∂–µ –≤—ã–≥–ª—è–¥–µ–ª–æ –∫–∞–∫ —Ç–µ–ª–µ—Ñ–æ–Ω) */
        #app-container {
            width: 100%;
            max-width: 480px; /* –®–∏—Ä–∏–Ω–∞ iPhone Pro Max */
            background: #111;
            position: relative;
            min-height: 100vh;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        /* === 1. –û–ë–õ–û–ñ–ö–ê (–≠–ö–†–ê–ù –í–•–û–î–ê) === */
        #cover-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 100;
            /* –î–∏–∑–∞–π–Ω –∫–æ–∂–∏ */
            background: url('https://www.transparenttextures.com/patterns/dark-leather.png'), 
                        linear-gradient(135deg, var(--scarlet-main) 0%, var(--scarlet-dark) 100%);
            background-blend-mode: multiply;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            border: 8px solid #2b0505;
            box-sizing: border-box;
            transition: transform 0.8s cubic-bezier(0.7, 0, 0.3, 1);
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è (—Å–¥–≤–∏–≥ –≤–≤–µ—Ä—Ö) */
        .cover-open { transform: translateY(-100%); }

        .cover-border {
            border: 4px double var(--gold-main); padding: 30px 20px; text-align: center;
            width: 80%; background: rgba(0,0,0,0.3); box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            position: relative;
        }

        .btn-open {
            margin-top: 30px;
            background: var(--gold-main); color: #2b0505; border: none;
            padding: 15px 40px; font-size: 18px; font-weight: 900;
            font-family: 'Cinzel', serif; text-transform: uppercase;
            cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* === 2. –ß–ò–¢–ê–õ–ö–ê (–õ–ï–ù–¢–ê) === */
        #reader {
            display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ–∫–∞ –Ω–µ –æ—Ç–∫—Ä–æ–µ–º */
            width: 100%;
            background-color: var(--paper-color);
            background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
            padding-bottom: 50px;
        }

        /* –û–¥–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–º–∏–∫—Å–∞ */
        .comic-page {
            width: 100%;
            display: block;
            border-bottom: 2px solid #d4c4a3; /* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —Å—Ç—Ä–∞–Ω–∏—Ü */
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loading-placeholder {
            height: 300px; display: flex; justify-content: center; align-items: center;
            color: #888; font-size: 14px;
        }

        /* –ü–æ–¥–≤–∞–ª */
        .footer {
            padding: 40px 20px; text-align: center;
            background: #2b0505; color: var(--gold-main);
            border-top: 4px double var(--gold-main);
        }

        #status-text { margin-top: 10px; font-size: 12px; opacity: 0.8; }

    </style>
</head>
<body>

    <div id="app-container">
        
        <div id="cover-screen">
            <div class="cover-border">
                <div style="font-size: 40px;">‚ö°</div>
                <h1 style="font-size: 32px; line-height: 1.2; margin: 20px 0; text-shadow: 2px 2px 0 #000;">
                    –ò–°–¢–û–†–ò–Ø –ê–ù–†–ò
                </h1>
                <div style="font-size: 14px; letter-spacing: 2px; opacity: 0.8;">–ú–ê–ì–ò–ß–ï–°–ö–ò–ô –¢–û–ú I</div>
                <div style="font-size: 40px; margin-top: 20px;">‚öΩ</div>
                
                <div id="status-text">–°–≤—è–∑—å —Å GitHub...</div>
                
                <button id="start-btn" class="btn-open" style="display: none;" onclick="openBook()">
                    –û–¢–ö–†–´–¢–¨
                </button>
            </div>
        </div>

        <div id="reader">
            </div>

    </div>

    <script>
        // ============================================
        // üëá –¢–í–û–ò –ù–ê–°–¢–†–û–ô–ö–ò
        // ============================================
        const USERNAME = "anri-sila007";
        const REPO_NAME = "comic_anri";
        // ============================================

        const statusText = document.getElementById('status-text');
        const startBtn = document.getElementById('start-btn');
        const readerDiv = document.getElementById('reader');
        const coverScreen = document.getElementById('cover-screen');
        
        let imageFiles = [];

        // 1. –ò–©–ï–ú –§–ê–ô–õ–´
        async function fetchImages() {
            const apiUrl = `https://api.github.com/repos/${USERNAME}/${REPO_NAME}/contents`;
            
            try {
                const response = await fetch(apiUrl);
                if (!response.ok) throw new Error("–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω");
                const data = await response.json();
                
                // –§–∏–ª—å—Ç—Ä—É–µ–º –∫–∞—Ä—Ç–∏–Ω–∫–∏
                imageFiles = data.filter(file => file.name.match(/\.(jpg|jpeg|png|webp)$/i));

                if (imageFiles.length === 0) {
                    statusText.innerText = "–ü–∞–ø–∫–∞ –ø—É—Å—Ç–∞! –ó–∞–≥—Ä—É–∑–∏ —Ñ–æ—Ç–æ.";
                    return;
                }

                // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: 1.jpg, 2.jpg, 10.jpg
                imageFiles.sort((a, b) => a.name.localeCompare(b.name, undefined, {numeric: true, sensitivity: 'base'}));

                statusText.innerText = `–ù–∞–π–¥–µ–Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü: ${imageFiles.length}`;
                startBtn.style.display = 'inline-block';

            } catch (err) {
                statusText.innerText = "–û—à–∏–±–∫–∞: " + err.message;
                statusText.style.color = '#ff5555';
            }
        }

        // 2. –û–¢–ö–†–´–í–ê–ï–ú –ö–ù–ò–ì–£
        function openBook() {
            // –ê–Ω–∏–º–∞—Ü–∏—è –æ–±–ª–æ–∂–∫–∏ –≤–≤–µ—Ä—Ö
            coverScreen.classList.add('cover-open');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–µ–Ω—Ç—É
            readerDiv.style.display = 'block';
            
            // –í—Å—Ç–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç–∏–Ω–∫–∏
            renderImages();
        }

        function renderImages() {
            readerDiv.innerHTML = ''; // –û—á–∏—Å—Ç–∫–∞
            
            // –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å—Ç–æ—Ä–æ–Ω–∞ –æ–±–ª–æ–∂–∫–∏ (–ø—É—Å—Ç–∞—è –±—É–º–∞–≥–∞ –≤ –Ω–∞—á–∞–ª–µ)
            readerDiv.innerHTML += `<div style="height: 50px;"></div>`;

            imageFiles.forEach((file, index) => {
                // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É
                const img = document.createElement('img');
                img.src = file.download_url;
                img.className = 'comic-page';
                img.loading = 'lazy'; // –í–ê–ñ–ù–û: –ì—Ä—É–∑–∏—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –¥–æ –Ω–µ—ë –¥–æ–ª–∏—Å—Ç–∞–µ—à—å (–Ω–µ —Ç–æ—Ä–º–æ–∑–∏—Ç)
                img.alt = `–°—Ç—Ä–∞–Ω–∏—Ü–∞ ${index + 1}`;
                
                readerDiv.appendChild(img);
            });

            // –ö–æ–Ω–µ—Ü
            readerDiv.innerHTML += `
                <div class="footer">
                    <h2>–ö–û–ù–ï–¶ –ì–õ–ê–í–´</h2>
                    <p>–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç...</p>
                </div>
            `;
        }

        // –ó–∞–ø—É—Å–∫ –ø–æ–∏—Å–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        fetchImages();

    </script>
</body>
</html>
